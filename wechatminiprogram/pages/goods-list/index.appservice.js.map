{"version":3,"file":"","sourceRoot":"","sources":["pages/goods-list/index.js"],"names":["Page","data","goodsList","_id","title","price","showTip","content","onLoad","fetchGoodsList","_this","this","_asyncToGenerator2","_regeneratorRuntime2","mark","_callee","_res$result","res","errMsg","wrap","_context","prev","next","setData","isLoading","wx","cloud","callFunction","name","type","sent","result","dataList","t0","errCode","includes","abrupt","stop","generateMPCode","_this2","_callee2","resp","_context2","showLoading","pagePath","codeModalVisible","codeImageSrc","hideLoading"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+LAAAA,KAAK,CACHC,KAAM,CACJC,UAAW,CACT,CACEC,IAAK,IACLC,MAAO,MACPC,MAAO,IAGXC,SAAS,EACTF,MAAO,GACPG,QAAS,IAGXC,OAAM,aAIAC,eAAc,WAAG,IAAAC,EAAAC,KAAA,OAAAC,EAAAC,IAAAC,MAAA,SAAAC,IAAA,IAAAC,EAAAC,EAAAf,EAAAgB,EAAA,OAAAL,IAAAM,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EACa,OAAlCZ,EAAKa,QAAQ,CAAEC,WAAW,IAAQJ,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAEdG,GAAGC,MAAMC,aAAa,CACtCC,KAAM,sBACN3B,KAAM,CAAE4B,KAAM,oBACd,KAAA,EAHIZ,EAAGG,EAAAU,KAIH5B,GAAYe,MAAAA,GAAW,QAARD,EAAHC,EAAKc,cAAM,IAAAf,OAAR,EAAHA,EAAagB,WAAY,GAC3CtB,EAAKa,QAAQ,CACXC,WAAW,EACXtB,UAAAA,IACCkB,EAAAE,KAAA,GAAA,MAAA,KAAA,EAEoB,GAFpBF,EAAAC,KAAA,EAAAD,EAAAa,GAAAb,EAAA,MAAA,GAEYA,EAAAa,GAAPC,UAAShB,EAAME,EAAAa,GAANf,QACNiB,SAAS,yBAAwB,CAAAf,EAAAE,KAAA,GAAA,MAMvC,OALHZ,EAAKa,QAAQ,CACXjB,SAAS,EACTF,MAAO,WACPG,QACE,6DACDa,EAAAgB,OAAA,UAAA,KAAA,GAAA,IAGDlB,EAAOiB,SAAS,6CAA4C,CAAAf,EAAAE,KAAA,GAAA,MAM3D,OALHZ,EAAKa,QAAQ,CACXjB,SAAS,EACTF,MAAO,SACPG,QACE,+FACDa,EAAAgB,OAAA,UAAA,KAAA,GAAA,IAAA,MAAA,OAAAhB,EAAAiB,UAAAtB,EAAA,KAAA,CAAA,CAAA,EAAA,QA7BcH,IAmCjB0B,eAAc,WAAG,IAAAC,EAAA5B,KAAA,OAAAC,EAAAC,IAAAC,MAAA,SAAA0B,IAAA,IAAAC,EAAAvB,EAAA,OAAAL,IAAAM,MAAA,SAAAuB,GAAA,OAAA,OAAAA,EAAArB,KAAAqB,EAAApB,MAAA,KAAA,EACJ,OAAjBG,GAAGkB,cAAcD,EAAArB,KAAA,EAAAqB,EAAApB,KAAA,EAEIG,GAAGC,MAAMC,aAAa,CACvCC,KAAM,sBACN3B,KAAM,CACJ4B,KAAM,cACNe,SAAU,4BAEZ,KAAA,EANIH,EAAIC,EAAAZ,KAOVS,EAAKhB,QAAQ,CAAEsB,kBAAkB,EAAMC,aAAcL,MAAAA,OAAI,EAAJA,EAAMV,SAC3DN,GAAGsB,cAAcL,EAAApB,KAAA,GAAA,MAAA,KAAA,EAGM,GAHNoB,EAAArB,KAAA,EAAAqB,EAAAT,GAAAS,EAAA,MAAA,GAEjBjB,GAAGsB,cACYL,EAAAT,GAAPC,UAAShB,EAAMwB,EAAAT,GAANf,QACNiB,SAAS,yBAAwB,CAAAO,EAAApB,KAAA,GAAA,MAMvC,OALHiB,EAAKhB,QAAQ,CACXjB,SAAS,EACTF,MAAO,WACPG,QACE,6DACDmC,EAAAN,OAAA,UAAA,KAAA,GAAA,IAGDlB,EAAOiB,SAAS,6CAA4C,CAAAO,EAAApB,KAAA,GAAA,MAM3D,OALHiB,EAAKhB,QAAQ,CACXjB,SAAS,EACTF,MAAO,SACPG,QACE,+FACDmC,EAAAN,OAAA,UAAA,KAAA,GAAA,IAAA,MAAA,OAAAM,EAAAL,UAAAG,EAAA,KAAA,CAAA,CAAA,EAAA,QA9Bc5B","sourcesContent":["Page({\n  data: {\n    goodsList: [\n      {\n        _id: \"1\",\n        title: \"商品1\",\n        price: 1,\n      },\n    ],\n    showTip: false,\n    title: \"\",\n    content: \"\",\n  },\n\n  onLoad() {\n    // this.fetchGoodsList();\n  },\n\n  async fetchGoodsList() {\n    this.setData({ isLoading: true });\n    try {\n      const res = await wx.cloud.callFunction({\n        name: \"quickstartFunctions\",\n        data: { type: \"fetchGoodsList\" },\n      });\n      const goodsList = res?.result?.dataList || [];\n      this.setData({\n        isLoading: false,\n        goodsList,\n      });\n    } catch (e) {\n      const { errCode, errMsg } = e;\n      if (errMsg.includes(\"Environment not found\")) {\n        this.setData({\n          showTip: true,\n          title: \"云开发环境未找到\",\n          content:\n            \"如果已经开通云开发，请检查环境ID与 `miniprogram/app.js` 中的 `env` 参数是否一致。\",\n        });\n        return;\n      }\n      if (errMsg.includes(\"FunctionName parameter could not be found\")) {\n        this.setData({\n          showTip: true,\n          title: \"请上传云函数\",\n          content:\n            \"按照教程指引更新云函数，保存完成后，在'cloudfunctions/quickstartFunctions'目录右键，选择【上传并部署-云端安装依赖】，等待云函数上传完成后重试。\",\n        });\n        return;\n      }\n    }\n  },\n\n  async generateMPCode() {\n    wx.showLoading();\n    try {\n      const resp = await wx.cloud.callFunction({\n        name: \"quickstartFunctions\",\n        data: {\n          type: \"genMpQrcode\",\n          pagePath: \"pages/goods-list/index\",\n        },\n      });\n      this.setData({ codeModalVisible: true, codeImageSrc: resp?.result });\n      wx.hideLoading();\n    } catch (e) {\n      wx.hideLoading();\n      const { errCode, errMsg } = e;\n      if (errMsg.includes(\"Environment not found\")) {\n        this.setData({\n          showTip: true,\n          title: \"云开发环境未找到\",\n          content:\n            \"如果已经开通云开发，请检查环境ID与 `miniprogram/app.js` 中的 `env` 参数是否一致。\",\n        });\n        return;\n      }\n      if (errMsg.includes(\"FunctionName parameter could not be found\")) {\n        this.setData({\n          showTip: true,\n          title: \"请上传云函数\",\n          content:\n            \"按照教程指引更新云函数，保存完成后，在'cloudfunctions/quickstartFunctions'目录右键，选择【上传并部署-云端安装依赖】，等待云函数上传完成后重试。\",\n        });\n        return;\n      }\n    }\n  },\n});\n"],"wx":{"version":1,"userVersion":"1.0.0","userNotes":"2025.3.11上传的第一个版本，可以实时查看数据以及状态识别\n22 在 2025年3月11日晚上8点06分 提交上传","packageVersion":"1557b7bacea3bb1c91f02063b1a0736c"}}