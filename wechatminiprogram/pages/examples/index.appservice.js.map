{"version":3,"file":"","sourceRoot":"","sources":["pages/examples/index.js"],"names":["Page","data","showTip","powerList","title","tip","showItem","item","type","page","tag","link","haveCreateCollection","content","onClickPowerInfo","e","index","currentTarget","dataset","this","selectedItem","wx","navigateTo","url","concat","_this$data$selectedEn","selectedEnv","envId","setData","onClickDatabase","jumpPage","_this$data$selectedEn2","_this$data$selectedEn3","_e$currentTarget$data","_this","showLoading","cloud","callFunction","name","then","resp","result","success","hideLoading","catch","errCode","errMsg","includes"],"mappings":"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","sourcesContent":["// index.js\nPage({\n  data: {\n    showTip: false,\n    powerList: [\n      {\n        title: '云函数',\n        tip: '安全、免鉴权运行业务代码',\n        showItem: false,\n        item: [\n          {\n            type: 'getOpenId',\n            title: '获取OpenId',\n          },\n          {\n            type: 'getMiniProgramCode',\n            title: '生成小程序码',\n          },\n        ],\n      },\n      {\n        title: '数据库',\n        tip: '安全稳定的文档型数据库',\n        showItem: false,\n        item: [\n          {\n            type: 'createCollection',\n            title: '创建集合',\n          },\n          {\n            type: 'selectRecord',\n            title: '查询记录',\n          },\n          {\n            title: '更新记录',\n            page: 'updateRecord',\n          },\n          {\n            title: '聚合操作',\n            page: 'sumRecord',\n          },\n        ],\n      },\n      {\n        title: '云存储',\n        tip: '自带CDN加速文件存储',\n        showItem: false,\n        item: [\n          {\n            type: 'uploadFile',\n            title: '上传文件',\n          },\n        ],\n      },\n      {\n        type: 'singleTemplate',\n        title: '云模板',\n        tip: '基于页面模板，快速配置、搭建小程序页面',\n        tag: 'new',\n      },\n      {\n        type: 'cloudBackend',\n        title: '云后台',\n        tip: '开箱即用的小程序后台管理系统',\n      },\n      {\n        title: '云托管',\n        tip: '不限语言的全托管容器服务',\n        link: 'https://cloud.weixin.qq.com/cloudrun',\n      },\n    ],\n    haveCreateCollection: false,\n    title: \"\",\n    content: \"\"\n  },\n  onClickPowerInfo(e) {\n    const index = e.currentTarget.dataset.index;\n    const powerList = this.data.powerList;\n    const selectedItem = powerList[index];\n    if (selectedItem.link) {\n      wx.navigateTo({\n        url: `../web/index?url=${selectedItem.link}&title=${selectedItem.title}`,\n      });\n    } else if (selectedItem.type) {\n      wx.navigateTo({\n        url: `/pages/exampleDetail/index?envId=${this.data.selectedEnv?.envId}&type=${selectedItem.type}`,\n      });\n    } else if (selectedItem.page) {\n      wx.navigateTo({\n        url: `/pages/${selectedItem.page}/index`,\n      });\n    } else if (\n      selectedItem.title === '数据库' &&\n      !this.data.haveCreateCollection\n    ) {\n      this.onClickDatabase(powerList,selectedItem);\n    } else {\n      selectedItem.showItem = !selectedItem.showItem;\n      this.setData({\n        powerList,\n      });\n    }\n  },\n\n  jumpPage(e) {\n    const { type, page } = e.currentTarget.dataset;\n    if (type) {\n      wx.navigateTo({\n        url: `/pages/exampleDetail/index?envId=${this.data.selectedEnv?.envId}&type=${type}`,\n      });\n    } else {\n      wx.navigateTo({\n        url: `/pages/${page}/index?envId=${this.data.selectedEnv?.envId}`,\n      });\n    }\n  },\n\n  onClickDatabase(powerList,selectedItem) {\n    wx.showLoading({\n      title: '',\n    });\n    wx.cloud\n      .callFunction({\n        name: 'quickstartFunctions',\n        data: {\n          type: 'createCollection',\n        },\n      })\n      .then((resp) => {\n        if (resp.result.success) {\n          this.setData({\n            haveCreateCollection: true,\n          });\n        }\n        selectedItem.showItem = !selectedItem.showItem;\n        this.setData({\n          powerList,\n        });\n        wx.hideLoading();\n      })\n      .catch((e) => {\n        wx.hideLoading();\n        const { errCode, errMsg } = e\n        if (errMsg.includes('Environment not found')) {\n          this.setData({\n            showTip: true,\n            title: \"云开发环境未找到\",\n            content: \"如果已经开通云开发，请检查环境ID与 `miniprogram/app.js` 中的 `env` 参数是否一致。\"\n          });\n          return\n        }\n        if (errMsg.includes('FunctionName parameter could not be found')) {\n          this.setData({\n            showTip: true,\n            title: \"请上传云函数\",\n            content: \"在'cloudfunctions/quickstartFunctions'目录右键，选择【上传并部署-云端安装依赖】，等待云函数上传完成后重试。\"\n          });\n          return\n        }\n      });\n  },\n});\n"],"wx":{"version":1,"userVersion":"1.0.0","userNotes":"2025.3.11上传的第一个版本，可以实时查看数据以及状态识别\n22 在 2025年3月11日晚上8点06分 提交上传","packageVersion":"1557b7bacea3bb1c91f02063b1a0736c"}}